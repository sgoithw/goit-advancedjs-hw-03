{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_eedEBIhSa1Zz96n6kEJ4AN8kcMgPva3zDP62EgDebovjszetJvu8mLFCWJ8MUFs7';\n\n/**\n * Fetches all cat breeds\n * @returns {Promise<AxiosResponse<any>>}\n */\nfunction fetchBreeds() {\n  return axios.get('https://api.thecatapi.com/v1/breeds');\n}\n\n/**\n * Fetches a cat by breed\n * @param {string} breedId\n * @returns {Promise<AxiosResponse<any>>}\n */\nfunction fetchCatByBreed(breedId) {\n  const query = new URLSearchParams({ breed_ids: breedId });\n  return axios.get(`https://api.thecatapi.com/v1/images/search?${query}`);\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import { fetchBreeds } from './cat-api.js';\nimport { fetchCatByBreed } from './cat-api.js';\nimport iziToast from 'izitoast/dist/js/iziToast.min.js';\n\nimport 'modern-normalize/modern-normalize.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/styles.css';\n\nconst elements = {\n  breedsList: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  catInfo: document.querySelector('div.cat-info'),\n};\n\nrenderBreeds();\n\nelements.breedsList.addEventListener('change', onBreedSelect);\n\n/**\n * Handles breed select event\n * @param {*} e\n * @return {void}\n */\nfunction onBreedSelect(e) {\n  renderCatInfo(e.target.value);\n}\n\n/**\n * Renders cat info by selected breed\n * @param {*} id\n */\nfunction renderCatInfo(id) {\n  showLoader();\n  elements.catInfo.innerHTML = '';\n  fetchCatByBreed(id)\n    .then(({ data: [cat] }) => {\n      elements.catInfo.innerHTML = getCatInfoCardHTML(cat);\n      hideLoader();\n    })\n    .catch(err => {\n      hideLoader();\n      showApiError(err);\n    });\n}\n\n/**\n * Renders breeds list\n * @return {void}\n */\nfunction renderBreeds() {\n  showLoader();\n  fetchBreeds()\n    .then(({ data: breeds }) => {\n      elements.breedsList.innerHTML = breeds\n        .map(breed => `<option value=\"${breed.id}\">${breed.name}</option>`)\n        .join('');\n      hideLoader();\n      elements.breedsList.classList.remove('visually-hidden');\n    })\n    .catch(err => {\n      hideLoader();\n      showApiError(err);\n    });\n}\n\n/**\n * Returns string which contains cat info card html\n * @param {*} cat\n * @return {string}\n */\nfunction getCatInfoCardHTML(cat) {\n  return `<div class=\"cat-info-card\">\n            <img class=\"cat-info-image\" src=\"${cat.url}\" alt=\"cat\" />\n            <div class=\"cat-info-holder\">\n              <h2 class=\"cat-info-title\">${cat.breeds[0].name}</h2>\n              <p class=\"cat-info-text\">${cat.breeds[0].description}</p>\n              <p class=\"cat-info-text\"><b>Temperament:</b> ${cat.breeds[0].temperament}</p>\n            </div>\n          </div>`;\n}\n\n/**\n * Shows loader\n */\nfunction showLoader() {\n  elements.loader.classList.remove('visually-hidden');\n}\n\n/**\n * Hides loader\n */\nfunction hideLoader() {\n  elements.loader.classList.add('visually-hidden');\n}\n\n/**\n * Shows api error message using popup\n *\n * @param {*} err\n */\nfunction showApiError(err) {\n  iziToast.show({\n    color: 'red',\n    title: 'Ooops! error occured',\n    message: `${err.name}: ${err.message}`,\n    position: 'topRight',\n  });\n}\n"],"names":["axios","fetchBreeds","fetchCatByBreed","breedId","query","elements","renderBreeds","onBreedSelect","renderCatInfo","id","showLoader","cat","getCatInfoCardHTML","hideLoader","err","showApiError","breeds","breed","iziToast"],"mappings":"wvBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAMF,SAASC,GAAc,CACrB,OAAOD,EAAM,IAAI,qCAAqC,CACxD,CAOA,SAASE,EAAgBC,EAAS,CAChC,MAAMC,EAAQ,IAAI,gBAAgB,CAAE,UAAWD,CAAS,CAAA,EACxD,OAAOH,EAAM,IAAI,8CAA8CI,GAAO,CACxE,CCbA,MAAMC,EAAW,CACf,WAAY,SAAS,cAAc,eAAe,EAClD,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,cAAc,CAChD,EAEAC,IAEAD,EAAS,WAAW,iBAAiB,SAAUE,CAAa,EAO5D,SAASA,EAAc,EAAG,CACxBC,EAAc,EAAE,OAAO,KAAK,CAC9B,CAMA,SAASA,EAAcC,EAAI,CACzBC,IACAL,EAAS,QAAQ,UAAY,GAC7BH,EAAgBO,CAAE,EACf,KAAK,CAAC,CAAE,KAAM,CAACE,CAAG,CAAC,IAAO,CACzBN,EAAS,QAAQ,UAAYO,EAAmBD,CAAG,EACnDE,GACN,CAAK,EACA,MAAMC,GAAO,CACZD,IACAE,EAAaD,CAAG,CACtB,CAAK,CACL,CAMA,SAASR,GAAe,CACtBI,IACAT,EAAa,EACV,KAAK,CAAC,CAAE,KAAMe,KAAa,CAC1BX,EAAS,WAAW,UAAYW,EAC7B,IAAIC,GAAS,kBAAkBA,EAAM,OAAOA,EAAM,eAAe,EACjE,KAAK,EAAE,EACVJ,IACAR,EAAS,WAAW,UAAU,OAAO,iBAAiB,CAC5D,CAAK,EACA,MAAMS,GAAO,CACZD,IACAE,EAAaD,CAAG,CACtB,CAAK,CACL,CAOA,SAASF,EAAmBD,EAAK,CAC/B,MAAO;AAAA,+CACsCA,EAAI;AAAA;AAAA,2CAERA,EAAI,OAAO,GAAG;AAAA,yCAChBA,EAAI,OAAO,GAAG;AAAA,6DACMA,EAAI,OAAO,GAAG;AAAA;AAAA,iBAG3E,CAKA,SAASD,GAAa,CACpBL,EAAS,OAAO,UAAU,OAAO,iBAAiB,CACpD,CAKA,SAASQ,GAAa,CACpBR,EAAS,OAAO,UAAU,IAAI,iBAAiB,CACjD,CAOA,SAASU,EAAaD,EAAK,CACzBI,EAAS,KAAK,CACZ,MAAO,MACP,MAAO,uBACP,QAAS,GAAGJ,EAAI,SAASA,EAAI,UAC7B,SAAU,UACd,CAAG,CACH"}